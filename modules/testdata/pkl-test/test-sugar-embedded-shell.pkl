amends "pkl:test"

import "tpkl:tpkl"

examples {
  //
  // sugar for running a script with the embedded shell
  //

  ["embedded-shell-anonymous-function-with-string"] {
    new tpkl.Tasks {
      ["embedded-shell-anonymous-function-with-string"] {
        cmds {
          "echo start" |> tpkl.sh
        }
      }
    }
  }

  ["embedded-shell-anonymous-function-with-list"] {
    new tpkl.Tasks {
      ["embedded-shell-anonymous-function-with-list"] {
        cmds {
          List("echo start", "-x") |> tpkl.sh
        }
      }
    }
  }

  ["embedded-shell-anonymous-function-with-listing"] {
    new tpkl.Tasks {
      ["embedded-shell-anonymous-function-with-listing"] {
        cmds {
          new Listing { "echo start"; "-x" } |> tpkl.sh
        }
      }
    }
  }

  ["embedded-shell-anonymous-function-with-dynamic"] {
    new tpkl.Tasks {
      ["embedded-shell-anonymous-function-with-dynamic"] {
        cmds {
          new Dynamic { "echo start"; "-x" } |> tpkl.sh
        }
      }
    }
  }

  ["embedded-shell-function-with-string"] {
    new tpkl.Tasks {
      ["embedded-shell-function-with-string"] {
        cmds {
          tpkl.sh("echo start")
        }
      }
    }
  }

  ["embedded-shell-function-with-list"] {
    new tpkl.Tasks {
      ["embedded-shell-function-with-list"] {
        cmds {
          tpkl.sh(List("echo start", "-x"))
        }
      }
    }
  }

  ["embedded-shell-function-with-listing"] {
    new tpkl.Tasks {
      ["embedded-shell-function-with-listing"] {
        cmds {
          tpkl.sh(new Listing { "echo start"; "-x" })
        }
      }
    }
  }

  ["embedded-shell-function-with-dynamic"] {
    new tpkl.Tasks {
      ["embedded-shell-function-with-dynamic"] {
        cmds {
          tpkl.sh(new Dynamic { "echo start"; "-x" })
        }
      }
    }
  }

  ["embedded-shell-amending"] {
    new tpkl.Tasks {
      ["embedded-shell-amending"] {
        cmds {
          (tpkl.Sh) {
            cmd { "echo start"; "-x" }
          }
        }
      }
    }
  }
}
