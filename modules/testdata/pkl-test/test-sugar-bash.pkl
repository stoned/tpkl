amends "pkl:test"

import "tpkl:tpkl"

examples {
  //
  // sugar for running a script with /bin/bash
  //

  ["bash-anonymous-function-with-string"] {
    new tpkl.Tasks {
      tasks {
        ["bash-anonymous-function-with-string"] {
          cmds {
            "echo start" |> tpkl.bash
          }
        }
      }
    }
  }

  ["bash-anonymous-function-with-list"] {
    new tpkl.Tasks {
      tasks {
        ["bash-anonymous-function-with-list"] {
          cmds {
            List("echo start", "echo end") |> tpkl.bash
          }
        }
      }
    }
  }

  ["bash-anonymous-function-with-listing"] {
    new tpkl.Tasks {
      tasks {
        ["bash-anonymous-function-with-listing"] {
          cmds {
            new Listing { "echo start"; "echo end" } |> tpkl.bash
          }
        }
      }
    }
  }

  ["bash-anonymous-function-with-dynamic"] {
    new tpkl.Tasks {
      tasks {
        ["bash-anonymous-function-with-dynamic"] {
          cmds {
            new Dynamic { "echo start"; "echo end" } |> tpkl.bash
          }
        }
      }
    }
  }

  ["bash-function-with-string"] {
    new tpkl.Tasks {
      tasks {
        ["bash-function-with-string"] {
          cmds {
            tpkl.bash("echo start")
          }
        }
      }
    }
  }

  ["bash-function-with-list"] {
    new tpkl.Tasks {
      tasks {
        ["bash-function-with-list"] {
          cmds {
            tpkl.bash(List("echo start", "echo end"))
          }
        }
      }
    }
  }

  ["bash-function-with-listing"] {
    new tpkl.Tasks {
      tasks {
        ["bash-function-with-listing"] {
          cmds {
            tpkl.bash(new Listing { "echo start"; "echo end" })
          }
        }
      }
    }
  }

  ["bash-function-with-dynamic"] {
    new tpkl.Tasks {
      tasks {
        ["bash-function-with-dynamic"] {
          cmds {
            tpkl.bash(new Dynamic { "echo start"; "echo end" })
          }
        }
      }
    }
  }

  ["bash-amending"] {
    new tpkl.Tasks {
      tasks {
        ["bash-amending"] {
          cmds {
            (tpkl.Bash) {
              cmd { "echo start" }
            }
          }
        }
      }
    }
  }
}
